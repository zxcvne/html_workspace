<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <style>
    .user {
      background-color: bisque;
    }
  </style>
  <body>
    <!-- 구구단 문제 -->
    <button type="button" id="startBtn">문제 출제</button>
    <ol id="q"></ol>
    <button type="button" id="compareBtn">정답확인</button>
    <h3 id="print"></h3>
  </body>
  <script>
    const ansObj = {}; // 정답을 담을 객체
    const quizArea = document.getElementById("q");
    // ans0 : 정답
    // ansObj[ans0] = 정답
    // id => html 파일에서 유일하게 구분이 가능해야 함.
    document.getElementById("startBtn").addEventListener("click", () => {
      let count = 0;
      let q = "";

      do {
        let dan = makeRandom(2, 9);
        let incre = makeRandom(1, 9);
        let answer = dan * incre;
        // 정답을 객체로 저장
        ansObj[`ans${count}`] = answer;

        // quiz 영역에 뿌리기
        q += `<li>${dan} * ${incre} = <input type="text" class="user" id="userAns${count}"></li>`;
        count++;
      } while (count < 10);
      quizArea.innerHTML = q;
      console.log(ansObj);
    });

    function makeRandom(min, max) {
      // 단 2~9 / incre 1~9
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    // 한번만 누를 수 있게...
    // 1. 버튼 객체를 disabled로 변경
    // 객체.disabled = true; => 버튼실행막기 / false => 버튼실행가능

    // {once : true} : 이벤트가 트리거 될 때 리스너를 자동으로 삭제
    // 정답확인
    document.getElementById("compareBtn").addEventListener("click", () => {
      let correct = 0; // 정답 개수
      let count = 0;
      const userInput = document.querySelectorAll(".user");
      console.log(userInput);

      while (count < 10) {
        console.log(userInput[count]);
        if (Number(userInput[count].value) == ansObj[`ans${count}`]) {
          correct++;
          userInput[count].value += `\t ✅`;
          userInput[count].style.backgroundColor = "coral";
        } else {
          userInput[count].value += `\t ❎`;
        }
        count++;
      }
      document.getElementById(
        "print"
      ).innerText = `정답개수 : ${correct} / 정답률 ${
        (correct / count) * 100
      }%`;
      // 이벤트를 한번만 발생 시키고 싶다면 addEventlistener의 3번째 메개변수 인자로 { once: true }를 사용
      {
        once: true;
      }
    });
  </script>
</html>
