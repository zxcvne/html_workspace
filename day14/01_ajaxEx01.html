<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- <style>
      @font-face {
        font-family: "Exo2-VariableFont_wght";
        src: url(../font/Exo2-VariableFont_wght.ttf);
      }
      * {
        font-family: "Exo2-VariableFont_wght";
      }
      #header {
        margin: 50px auto;
        text-align: center;
      }
      #header-title {
        font-size: 32px;
        font-weight: 700;
        margin: 20px;
      }
      #subText {
        font-size: 20px;
        font-weight: 500;
      }

      #section {
        margin-top: 80px;
        display: flex;
        justify-content: space-around;
      }

      #section-title {
        font-size: 26px;
        font-weight: 700;
      }
    </style> -->
    <style>
      @font-face {
        font-family: "Exo2-VariableFont_wght";
        src: url(../font/Exo2-VariableFont_wght.ttf);
      }
      body {
        text-align: center;
      }
      header {
        margin: 50px auto;
      }
      header > h1 {
        font-family: "Exo2-VariableFont_wght";
      }
      header > h3 {
        font-family: Cambria, Cochin, Georgia, Times, "Times New Roman", serif;
        font-size: 24px;
      }
      section {
        display: flex;
        justify-content: center;
      }
      section > div {
        margin: 0 30px;
        text-align: left;
        border: 1px solid #333;
        border-radius: 20px;
        box-shadow: 5px 5px 5px gray;
        padding: 20px;
      }
      section > div > div:first-child {
        font-family: Impact, Haettenschweiler, "Arial Narrow Bold", sans-serif;
        font-size: 18px;
      }
    </style>
  </head>
  <body>
    <!-- https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json -->
    <header id="header"></header>
    <section id="section"></section>
    <!-- <script> 
      const API_URL =
        "https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json";
      const $header = document.getElementById("header");
      const $section = document.getElementById("section");

      const getData = async () => {
        try {
          let response = await fetch(API_URL);
          let data = await response.json();
          console.log(data);
          console.log(data.members[0]);
          console.log(data.members[1]);
          console.log(data.members[2]);
          printHeader(data);
          printSection(data.members[0]);
          printSection(data.members[1]);
          printSection(data.members[2]);
        } catch (err) {
          console.log(err);
        }
      };
      getData();

      function printHeader(obj) {
        let str = "";
        for (const key in obj) {
          if (key == "squadName") {
            str += `<div id="header-title">${obj[key]}</div>`;
          } else if (key == "homeTown") {
            str += `<span id ="subText">${key} : ${obj[key]} // `;
          } else if (key == "formed") {
            str += `${key} : ${obj[key]}</span>`;
          }
        }
        $header.innerHTML += str;
      }

      function printSection(obj) {
        let str = "<div>";
        for (const key in obj) {
          if (key == "name") {
            str += `<div id="section-title">${obj[key]}</div>`;
          } else if (key == "powers") {
            str += `${key}: <br/>`;
            str += `<ul>`;
            for (let i = 0; i < obj[key].length; i++) {
              str += `<li>${obj[key][i]}</li>`;
            }
            str += `</ul>`;
          } else {
            str += `${key} : ${obj[key]}<br />`;
          }
        }
        str += "</div>";
        $section.innerHTML += str;
      }
    </script>-->
    <!-- {
      "squadName" : "Super Hero Squad",
      "homeTown" : "Metro City",
      "formed" : 2016,
      "secretBase" : "Super tower",
      "active" : true,
      "members" : [
        {
          "name" : "Molecule Man",
          "age" : 29,
          "secretIdentity" : "Dan Jukes",
          "powers" : [
            "Radiation resistance",
            "Turning tiny",
            "Radiation blast"
          ]
        },
        {
          "name" : "Madame Uppercut",
          "age" : 39,
          "secretIdentity" : "Jane Wilson",
          "powers" : [
            "Million tonne punch",
            "Damage resistance",
            "Superhuman reflexes"
          ]
        },
        {
          "name" : "Eternal Flame",
          "age" : 1000000,
          "secretIdentity" : "Unknown",
          "powers" : [
            "Immortality",
            "Heat Immunity",
            "Inferno",
            "Teleportation",
            "Interdimensional travel"
          ]
        }
      ]
    } -->
    <script>
      const $header = document.getElementById("header");
      const $section = document.getElementById("section");

      // HTML 문서가 로딩되면 호출
      // DOMContentLoaded
      // HTML 문서가 완전히 로드되고 DOM 구조가 준비되었을 때 발생

      document.addEventListener("DOMContentLoaded", () => {
        superHero().then((result) => printData(result));
      });

      // 데이터 로드
      async function superHero() {
        try {
          let resp = await fetch(
            "https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json"
          );
          let result = await resp.json();
          return result;
        } catch (err) {
          console.log(err);
        }
      }

      // 출력 함수
      function printData(obj) {
        console.log(obj);
        // header => h1 / h3
        // h1 => squadName
        // h3 => homeTown / formed
        let str = "";
        str += `<h1>${obj.squadName}</h1>`;
        str += `<h3>HomeTown : ${obj.homeTown} // Formed : ${obj.formed}</h3>`;
        $header.innerHTML = str;
        // section => div => div*4 => 마지막 div => ul => li
        for (let i = 0; i < obj.members.length; i++) {
          let member = obj.members[i];
          console.log(member);
          let memberStr = "<div>";
          memberStr += `<div>${member.name}</div>`;
          memberStr += `<div>SecretIdentity : ${member.secretIdentity}</div>`;
          memberStr += `<div>Age : ${member.age}</div>`;
          memberStr += `<div>SuperPowers : <ul id="power${i}"></ul>`;
          // ul => li
          //for (const p of member.powers) {
          //  memberStr += `<li>${p}</li>`;
          //}
          //memberStr += `</ul>`;
          memberStr += "</div></div>";
          $section.innerHTML += memberStr;
          member.powers.forEach((v) => {
            document.getElementById(`power${i}`).innerHTML += `<li>${v}</li>`;
          });
        }
      }
    </script>
  </body>
</html>
