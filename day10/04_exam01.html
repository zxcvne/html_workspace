<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .container{
            display: flex;
        }
        div > button:hover {
            cursor: pointer;
            transform: scale(1.01);
            background-color: #d9d9d9;
        }
        div img {
            width: 300px;
            height: 300px;
        }

        #game {
            font-size: 28px;
        }
        #result {
          font-size: 24px;
        }
    </style>
</head>
<body>
    <!-- 
        가위바위보 이미지를 버튼태그에 넣어 선택하여 가위바위보의 승률 계산
    -->
    <div class="container">
        <button id="sc" onclick="play(0)"><img src="../image/math_img_1.jpg" alt=""></button>
        <button id="ro" onclick="play(1)"><img src="../image/math_img_2.jpg" alt=""></button>
        <button id="pa" onclick="play(2)"><img src="../image/math_img_3.jpg" alt=""></button>
    </div>
    <h3 id="game"></h3>
    <h3 id="result"></h3>
    <h3 id="h3"></h3>
    <h3 id="rate"></h3>
</body>
<script>
    const game = ["가위", "바위", "보"];
   /*
    let win = 0;
    let draw = 0;
    let lose = 0;
    */
    let gCnt = 0;
    const resultCount = {
        win : 0,
        draw : 0,
        lose : 0
    }

    function play(player){
      gCnt++;
      let comNum = randomNumber()
      let result = getWinner(player, comNum);
      resultCount[result]++;

        document.getElementById("game").innerHTML = `결과 : com(${game[comNum]}) / player(${game[player]})`;
        document.getElementById("result").innerText = `${result}`;
        document.getElementById("h3").innerText = `win : ${resultCount.win} / draw : ${resultCount.draw} / lose : ${resultCount.lose} / count : ${gCnt}`;
        document.getElementById("rate").innerText = `승률 : ${getWinRate().toFixed(2)}%`;
    }

    function randomNumber() {
      return Math.floor(Math.random() * 3);
    }

    function getWinRate() {
        let sum = resultCount.win + resultCount.lose + resultCount.draw 
        return resultCount.win != 0 ? (resultCount.win / (sum - resultCount.draw))*100 : 0
    }

    function getWinner(userChoice, comChoice) {
      if (userChoice == comChoice) {
        return "draw";
      } else if (
        (userChoice == 0 && comChoice == 2) ||
        (userChoice == 1 && comChoice == 0) ||
        (userChoice == 2 && comChoice == 1)
      ) {
        return "win";
      } else {
        return "lose";
      }
    }
</script>
</html>